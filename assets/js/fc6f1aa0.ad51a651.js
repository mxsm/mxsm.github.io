"use strict";(self.webpackChunkmxsm_website=self.webpackChunkmxsm_website||[]).push([[4219],{3751:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>p});var t=r(4848),i=r(8453);const s={title:"Spring Environment\u6e90\u7801\u89e3\u6790",date:new Date("2019-01-23T00:00:00.000Z")},o=void 0,a={id:"spring/spring-framework/core-source-analysis/Spring-Environment",title:"Spring Environment\u6e90\u7801\u89e3\u6790",description:"Environment\u5173\u7cfb\u56fe",source:"@site/docs/spring/spring-framework/core-source-analysis/Spring-Environment.md",sourceDirName:"spring/spring-framework/core-source-analysis",slug:"/spring/spring-framework/core-source-analysis/Spring-Environment",permalink:"/docs/spring/spring-framework/core-source-analysis/Spring-Environment",draft:!1,unlisted:!1,editUrl:"https://github.com/mxsm/mxsm-website/edit/develop/docs/spring/spring-framework/core-source-analysis/Spring-Environment.md",tags:[],version:"current",lastUpdatedBy:"mxsm",lastUpdatedAt:1710777389,formattedLastUpdatedAt:"Mar 18, 2024",frontMatter:{title:"Spring Environment\u6e90\u7801\u89e3\u6790",date:"2019-01-23T00:00:00.000Z"},sidebar:"springframework",previous:{title:"Spring ApplicationContext\u6e90\u7801\u89e3\u6790",permalink:"/docs/spring/spring-framework/core-source-analysis/Spring-ApplicationContext"},next:{title:"Spring Event\u6e90\u7801\u89e3\u6790",permalink:"/docs/spring/spring-framework/core-source-analysis/Spring-Event"}},l={},p=[{value:"Environment\u5173\u7cfb\u56fe",id:"environment\u5173\u7cfb\u56fe",level:3},{value:"\u5206\u6790\u4e00\u4e0b\u5e38\u7528\u7684StandardEnvironment",id:"\u5206\u6790\u4e00\u4e0b\u5e38\u7528\u7684standardenvironment",level:3}];function c(n){const e={code:"code",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h3,{id:"environment\u5173\u7cfb\u56fe",children:"Environment\u5173\u7cfb\u56fe"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://github.com/mxsm/document/blob/master/image/Spring/Springframework/Environment.png?raw=true",alt:"\u56fe"})}),"\n",(0,t.jsxs)(e.p,{children:["\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\u6765 ",(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"Environment"})})," \u4e3b\u8981\u6709\u4e09\u4e2a\u5b9e\u73b0\u7c7b\uff1a"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"MockEnvironment"})}),"\n",(0,t.jsx)(e.p,{children:"\u7528\u4e8emock\u7684"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"StandardEnvironment"})}),"\n",(0,t.jsx)(e.p,{children:"\u6807\u51c6\u7684\u73af\u5883"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"StandardServletEnvironment"})}),"\n",(0,t.jsx)(e.p,{children:"\u7528\u4e8eweb\u7684\u73af\u5883"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"\u5206\u6790\u4e00\u4e0b\u5e38\u7528\u7684standardenvironment",children:"\u5206\u6790\u4e00\u4e0b\u5e38\u7528\u7684StandardEnvironment"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"public interface Environment extends PropertyResolver {\n\n\t//\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6\n\tString[] getActiveProfiles();\n\n    //\u83b7\u53d6\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\n\tString[] getDefaultProfiles();\n\t\n    //\u662f\u5426\u63a5\u53d7\u914d\u7f6e\u6587\u4ef6\n\tboolean acceptsProfiles(Profiles profiles);\n\n}\n\n//\u770b\u4e00\u4e0b\u63a5\u53e3 PropertyResolver\n//PropertyResolver \u4e3b\u8981\u662f\u83b7\u53d6\u5bf9\u5e94\u7684Properties\u503c\uff0cString\u6216\u8005\u8fdb\u884c\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u540e\u7684\u503c\n//\u540c\u65f6\u4f1a\u5904\u7406\u5360\u4f4d\u7b26\u7684\u6570\u636e\npublic interface PropertyResolver  {\n\n\t\n\tboolean containsProperty(String key);\n\n\n\t@Nullable\n\tString getProperty(String key);\n\n\tString getProperty(String key, String defaultValue);\n\n\n\t@Nullable\n\t<T> T getProperty(String key, Class<T> targetType);\n\n\n\t<T> T getProperty(String key, Class<T> targetType, T defaultValue);\n\n\n\tString getRequiredProperty(String key) throws IllegalStateException;\n\n\n\t<T> T getRequiredProperty(String key, Class<T> targetType) throws IllegalStateException;\n\n\n\tString resolvePlaceholders(String text);\n\n\n\tString resolveRequiredPlaceholders(String text) throws IllegalArgumentException;\n\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://github.com/mxsm/document/blob/master/image/Spring/Springframework/PropertyResolver.png?raw=true",alt:"\u56fe"})}),"\n",(0,t.jsx)(e.p,{children:"\u770b\u4e00\u4e0bStandardEnvironment\u7684\u4ee3\u7801"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'public class StandardEnvironment extends AbstractEnvironment {\n\n\t//\u7cfb\u7edf\u7684property\u540d\u79f0\n\tpublic static final String SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME = "systemEnvironment";\n\n\t//JVM\u7684property\u540d\u79f0\n\tpublic static final String SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME = "systemProperties";\n\n\n\t//\u628a\u7cfb\u7edf\u7684Properties\u548cJVM\u7684Properties\u5b58\u5165\n    //\u6b64\u65b9\u6cd5\u5728\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\u8fdb\u884c\u8c03\u7528\n\t@Override\n\tprotected void customizePropertySources(MutablePropertySources propertySources) {\n\t\tpropertySources.addLast(new MapPropertySource(SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME, getSystemProperties()));\n\t\tpropertySources.addLast(new SystemEnvironmentPropertySource(SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME, getSystemEnvironment()));\n\t}\n\n}\n'})})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>a});var t=r(6540);const i={},s=t.createContext(i);function o(n){const e=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);