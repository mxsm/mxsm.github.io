"use strict";(self.webpackChunkmxsm_website=self.webpackChunkmxsm_website||[]).push([[2961],{5522:(t,o,e)=>{e.r(o),e.d(o,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>g});var n=e(5893),r=e(1151);const i={title:"SpringBoot\u6e90\u7801\u89e3\u6790\u4e4b-AutoConfigureBefore\u3001AutoConfigureOrder\u3001AutoConfigureAfter",linkTitle:"SpringBoot\u6e90\u7801\u89e3\u6790\u4e4b-AutoConfigureBefore\u3001Order\u3001After",date:new Date("2018-04-15T00:00:00.000Z"),weight:2},s=void 0,a={id:"spring/spring-boot/annotation-source-analysis/springboot-AutoConfigureBefore-AutoConfigureOrder-AutoConfigureAfter",title:"SpringBoot\u6e90\u7801\u89e3\u6790\u4e4b-AutoConfigureBefore\u3001AutoConfigureOrder\u3001AutoConfigureAfter",description:"1. SpringBoot\u7684\u7c7b\u52a0\u8f7d\u987a\u5e8f\u6ce8\u89e3",source:"@site/docs/spring/spring-boot/annotation-source-analysis/springboot-AutoConfigureBefore-AutoConfigureOrder-AutoConfigureAfter.md",sourceDirName:"spring/spring-boot/annotation-source-analysis",slug:"/spring/spring-boot/annotation-source-analysis/springboot-AutoConfigureBefore-AutoConfigureOrder-AutoConfigureAfter",permalink:"/docs/spring/spring-boot/annotation-source-analysis/springboot-AutoConfigureBefore-AutoConfigureOrder-AutoConfigureAfter",draft:!1,unlisted:!1,editUrl:"https://github.com/mxsm/mxsm-website/edit/develop/docs/spring/spring-boot/annotation-source-analysis/springboot-AutoConfigureBefore-AutoConfigureOrder-AutoConfigureAfter.md",tags:[],version:"current",lastUpdatedBy:"mxsm",lastUpdatedAt:1706459174,formattedLastUpdatedAt:"Jan 28, 2024",frontMatter:{title:"SpringBoot\u6e90\u7801\u89e3\u6790\u4e4b-AutoConfigureBefore\u3001AutoConfigureOrder\u3001AutoConfigureAfter",linkTitle:"SpringBoot\u6e90\u7801\u89e3\u6790\u4e4b-AutoConfigureBefore\u3001Order\u3001After",date:"2018-04-15T00:00:00.000Z",weight:2},sidebar:"springboot",previous:{title:"SpringBoot\u542f\u52a8\u5206\u6790",permalink:"/docs/spring/spring-boot/core-source-analysis/springboot-start"},next:{title:"SpringBoot\u6ce8\u89e3\u89e3\u6790\u4e4bConditionalOnXXX\u6761\u4ef6\u6ce8\u89e3",permalink:"/docs/spring/spring-boot/annotation-source-analysis/springboot-ConditionalOnXXX-annotation"}},u={},g=[{value:"1. SpringBoot\u7684\u7c7b\u52a0\u8f7d\u987a\u5e8f\u6ce8\u89e3",id:"1-springboot\u7684\u7c7b\u52a0\u8f7d\u987a\u5e8f\u6ce8\u89e3",level:3},{value:"2. \u6e90\u7801\u89e3\u6790",id:"2-\u6e90\u7801\u89e3\u6790",level:3}];function l(t){const o={code:"code",em:"em",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h3,{id:"1-springboot\u7684\u7c7b\u52a0\u8f7d\u987a\u5e8f\u6ce8\u89e3",children:"1. SpringBoot\u7684\u7c7b\u52a0\u8f7d\u987a\u5e8f\u6ce8\u89e3"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.strong,{children:"AutoConfigureBefore"})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.strong,{children:"AutoConfigureOrder"})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.strong,{children:"AutoConfigureAfter"})}),"\n"]}),"\n",(0,n.jsx)(o.p,{children:"\u901a\u8fc7\u8fd9\u4e09\u4e2a\u6ce8\u89e3\u80fd\u591f\u5de7\u5999\u7684\u4f7f\u7528\u6392\u5e8f\u3002"}),"\n",(0,n.jsx)(o.h3,{id:"2-\u6e90\u7801\u89e3\u6790",children:"2. \u6e90\u7801\u89e3\u6790"}),"\n",(0,n.jsxs)(o.p,{children:["\u5728SpringBoot\u7684\u52a0\u8f7d\u4e3b\u8981\u901a\u8fc7\u6ce8\u89e3 ",(0,n.jsxs)(o.strong,{children:["@",(0,n.jsx)(o.em,{children:"EnableAutoConfiguration"})]})," \u6765\u5b9e\u73b0\u3002\u5728\u7c7b ",(0,n.jsx)(o.em,{children:(0,n.jsx)(o.strong,{children:"AutoConfigurationImportSelector"})})," \u4e2d\u6709\u4e00\u4e2a\u65b9\u6cd5\uff1a"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-java",children:"private List<String> sortAutoConfigurations(Set<String> configurations,AutoConfigurationMetadata autoConfigurationMetadata) {\n\treturn new AutoConfigurationSorter(getMetadataReaderFactory(), autoConfigurationMetadata)\n\t\t\t\t\t.getInPriorityOrder(configurations);\n}\n"})}),"\n",(0,n.jsxs)(o.p,{children:["\u901a\u8fc7\u4e0a\u9762\u7684\u53ef\u4ee5\u770b\u51fa\u6765\u4e3b\u8981\u662f\u901a\u8fc7 ",(0,n.jsx)(o.em,{children:(0,n.jsx)(o.strong,{children:"AutoConfigurationSorter"})})," \u6765\u5b9e\u73b0\u7684\u3002\u4e0b\u9762\u6765\u770b\u4e00\u4e0b\u8fd9\u4e2a\u7c7b\uff1a"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-java",children:"\tList<String> getInPriorityOrder(Collection<String> classNames) {\n\t\tAutoConfigurationClasses classes = new AutoConfigurationClasses(this.metadataReaderFactory,\n\t\t\t\tthis.autoConfigurationMetadata, classNames);\n\t\tList<String> orderedClassNames = new ArrayList<>(classNames);\n\t\t// Initially sort alphabetically\n\t\tCollections.sort(orderedClassNames);\n\t\t// Then sort by order\n\t\torderedClassNames.sort((o1, o2) -> {\n\t\t\tint i1 = classes.get(o1).getOrder();\n\t\t\tint i2 = classes.get(o2).getOrder();\n\t\t\treturn Integer.compare(i1, i2);\n\t\t});\n\t\t// \u5904\u7406\u8fd9\u4e24\u4e2a\u6ce8\u89e3 @AutoConfigureBefore @AutoConfigureAfter\n\t\torderedClassNames = sortByAnnotation(classes, orderedClassNames);\n\t\treturn orderedClassNames;\n\t}\n"})})]})}function d(t={}){const{wrapper:o}={...(0,r.a)(),...t.components};return o?(0,n.jsx)(o,{...t,children:(0,n.jsx)(l,{...t})}):l(t)}},1151:(t,o,e)=>{e.d(o,{Z:()=>a,a:()=>s});var n=e(7294);const r={},i=n.createContext(r);function s(t){const o=n.useContext(i);return n.useMemo((function(){return"function"==typeof t?t(o):{...o,...t}}),[o,t])}function a(t){let o;return o=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:s(t.components),n.createElement(i.Provider,{value:o},t.children)}}}]);