"use strict";(self.webpackChunkmxsm_website=self.webpackChunkmxsm_website||[]).push([[92452],{3905:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>m});var n=t(67294);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=n.createContext({}),c=function(e){var r=n.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},p=function(e){var r=c(e.components);return n.createElement(l.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},d=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(t),m=o,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return t?n.createElement(h,i(i({ref:r},p),{},{components:t})):n.createElement(h,i({ref:r},p))}));function m(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=d;var s={};for(var l in r)hasOwnProperty.call(r,l)&&(s[l]=r[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=t[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},73719:(e,r,t)=>{t.r(r),t.d(r,{contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var n=t(87462),o=(t(67294),t(3905));const a={},i="Track Bugs in Realtime with Ionic Monitoring",s={unversionedId:"developer-resources/guides/first-app-v3/track-bugs-ionic-monitoring",id:"developer-resources/guides/first-app-v3/track-bugs-ionic-monitoring",isDocsHomePage:!1,title:"Track Bugs in Realtime with Ionic Monitoring",description:"Bugs happen, and can be hard to track down - especially with hundreds of possible combinations of mobile devices and operating systems. Appflow Monitoring allows you to track errors in your app on users\u2019 phones and it sends them directly to you instantly, even if your code is minified!",source:"@site/docs/developer-resources/guides/first-app-v3/track-bugs-ionic-monitoring.md",sourceDirName:"developer-resources/guides/first-app-v3",slug:"/developer-resources/guides/first-app-v3/track-bugs-ionic-monitoring",permalink:"/cn/docs/developer-resources/guides/first-app-v3/track-bugs-ionic-monitoring",editUrl:"https://crowdin.com/project/ionic-docs",tags:[],version:"current",frontMatter:{}},l=[],c={toc:l};function p(e){let{components:r,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,a,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"track-bugs-in-realtime-with-ionic-monitoring"},"Track Bugs in Realtime with Ionic Monitoring"),(0,o.kt)("p",null,"Bugs happen, and can be hard to track down - especially with hundreds of possible combinations of mobile devices and operating systems. Appflow Monitoring allows you to track errors in your app on users\u2019 phones and it sends them directly to you instantly, even if your code is minified!"),(0,o.kt)("p",null,"Reducing customer frustration by fixing major issues quickly in your production apps are a substantial part of providing a high quality app experience. Combined with Appflow Deploy, new updates can be rolled out quickly to address problems in real-time."),(0,o.kt)("p",null,"To begin, let\u2019s add a global error handler that will catch and report all unhandled exceptions that occur in the app. Open ",(0,o.kt)("inlineCode",{parentName:"p"},"src/app/app.module.ts"),", then add two import statements:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ErrorHandler, Injectable, Injector } from '@angular/core';\nimport { IonicErrorHandler } from 'ionic-angular';\n")),(0,o.kt)("p",null,"Next, create an error handler class calls the Monitoring service\u2019s API whenever any errors have been encountered:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"@Injectable()\nexport class MyErrorHandler implements ErrorHandler {\n  ionicErrorHandler: IonicErrorHandler;\n\n  constructor(injector: Injector) {\n    try {\n      this.ionicErrorHandler = injector.get(IonicErrorHandler);\n    } catch (e) {\n      // Unable to get the IonicErrorHandler provider, ensure\n      // IonicErrorHandler has been added to the providers list below\n    }\n  }\n\n  handleError(err: any): void {\n    Pro.monitoring.handleNewError(err);\n\n    this.ionicErrorHandler && this.ionicErrorHandler.handleError(err);\n  }\n}\n")),(0,o.kt)("p",null,"Then, within the providers array, update IonicErrorHandler to MyErrorHandler:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"{provide: ErrorHandler, useClass: MyErrorHandler},\n")),(0,o.kt)("p",null,"It should then look like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"providers: [\n  // ...\n  IonicErrorHandler,\n  [{ provide: ErrorHandler, useClass: MyErrorHandler }],\n];\n")),(0,o.kt)("p",null,"Next, let\u2019s intentionally create a bug so we can demonstrate the power of Ionic Monitoring. Open ",(0,o.kt)("inlineCode",{parentName:"p"},"about.html")," and rename the takePicture method to something that doesn\u2019t exist, such as \u201ctakePhoto\u201d:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<button ion-fab (click)="photoService.takePhoto()"></button>\n')),(0,o.kt)("p",null,"With this change in place, anytime a user taps on the Camera button, an exception will be thrown and sent to Ionic\u2019s Monitoring service."),(0,o.kt)("p",null,"Last, we need to need to create a Source Map for your app. This file makes it easy for Monitoring to pinpoint problems by providing stack traces that map back to the original, unminified TypeScript code."),(0,o.kt)("p",null,"Sync the current version of the app by running the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"ionic monitoring syncmaps\n")),(0,o.kt)("p",null,"With our intentional error in place, let\u2019s try it out to see what happens. Run your app locally:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"ionic serve\n")),(0,o.kt)("p",null,"Tap on the Gallery tab, then the camera button. A runtime error should occur. In a browser, head over to the ",(0,o.kt)("a",{parentName:"p",href:"https://dashboard.ionicframework.com"},"Appflow dashboard"),", then Monitor -> Monitoring. After a few minutes, the error should appear:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"event monitoring",src:t(98973).Z})),(0,o.kt)("p",null,"Clicking on the event gives us lots of details surrounding what happened, such as a full stack trace. In this instance, we see that the error occurred three times on Mac OS X in the Chrome web browser."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"event details",src:t(65060).Z})),(0,o.kt)("p",null,"Given the proliferation of mobile devices and operating systems these days, this is immensely powerful. Armed with these details, we can hone in on the problem and fix it quickly."),(0,o.kt)("p",null,"This is a TypeScript bug, meaning a fix can be released using Live Updates. Give it a try!"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Revert the method back to \u201ctakePicture.\u201d"),(0,o.kt)("li",{parentName:"ul"},"Push the fix using Git. Remember, \u201cgit push ionic master.\u201d"),(0,o.kt)("li",{parentName:"ul"},"Roll out the fix using Live Updates from the Ionic dashboard.")),(0,o.kt)("p",null,"Supporting hundreds of mobile device types is so much easier with Appflow Monitoring. ",(0,o.kt)("a",{parentName:"p",href:"https://dashboard.ionicframework.com/settings/billing"},"Upgrade to the Appflow Developer plan today")," to get instant notification when bugs occur, save error history for sixty days (instead of seven), and unlock 10,000 live Deploy updates per month!"))}p.isMDXComponent=!0},65060:(e,r,t)=>{t.d(r,{Z:()=>n});const n=t.p+"assets/images/monitoring-details-2efc120014b8c3610691fff33b5166c3.png"},98973:(e,r,t)=>{t.d(r,{Z:()=>n});const n=t.p+"assets/images/monitoring-event-fe2d040472ccc2c44fbe2a43e3a1ff1a.png"}}]);